---
title: "Homework 05: Factor and Figure Management"
author: "Aidan Hughes"
date: "October 17, 2018"
output: 
  github_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Overview

Taken from the [homework HTML file](http://stat545.com/Classroom/assignments/hw05/hw05.html), here are the goals for this assignment:


- Reorder a factor in a principled way based on the data and demonstrate the effect in arranged data and in figures.

- Write some data to file and load it back into R.

- Improve a figure (or make one from scratch), using new knowledge, e.g., control the color scheme, use factor levels, smoother mechanics.

- Make a plotly visual.

- Implement visualization design principles.

# Part 1: Factor Management

First things first, load all of our packages.

```{r packages}
suppressPackageStartupMessages(library("gapminder"))
suppressPackageStartupMessages(library("tidyverse"))
suppressPackageStartupMessages(library("singer"))
suppressPackageStartupMessages(library("scales"))
```

Before manipulating the levels of gapminder, let's first check the columns are actually factors and then look at some numbers so we can do a before/after comparison.

```{r before dropping}
nrow(gapminder)

cont <- gapminder$continent

is.factor(cont)
nlevels(cont)
levels(cont)
```

```{r after dropped}
no_Oceania <- gapminder %>%
  filter(continent != "Oceania") %>%
  droplevels()
  
nlevels(no_Oceania$continent)
levels(no_Oceania$continent)
nrow(no_Oceania)
```

We can plot the before and after data frames to see the difference. 

```{r Oceania not dropped}
gapminder %>%
  mutate(continent = fct_reorder(continent, gdpPercap, .fun = min)) %>%
  ggplot(aes(continent, gdpPercap)) +
  geom_jitter(colour = "darkblue", alpha = 0.3) +
  scale_y_log10(labels=comma_format()) + 
  labs(y = "GDP Per Capita", x = "Continent", title = "GDP Per Capita of Continents Before Dropping Oceania") +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme_minimal()
```


```{r Oceania dropped}
no_Oceania %>%
  mutate(continent = fct_reorder(continent, gdpPercap, .fun = min)) %>%
  ggplot(aes(continent, gdpPercap)) +
  geom_jitter(colour = "orange", alpha = 0.3) +
  scale_y_log10(labels=comma_format())
```

Clearly, the GDP per Capita no longer plots Oceania as it has been dropped.


We can try `arrange()` as well with gdpPercap, which would be the same as using `fct_reorder` with the function set as `mean`.

```{r}
no_Oceania %>%
  arrange(gdpPercap) %>%
  ggplot(aes(continent, gdpPercap)) +
  geom_jitter(colour = "darkgreen", alpha = 0.3) +
  scale_y_log10(labels=comma_format())

```

